{"version":3,"names":[],"mappings":"","sources":["bundle.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar coreOptions = require('./core/options');\nvar coreViewport = require('./core/viewport');\nvar coreCellManager = require('./core/cellManager');\nvar coreCell = require('./core/cell');\n\n/**\n * tableCloth constructor. Builds a new instance of tableCloth and binds it\n * to the dom at the desired target div\n * @param {string} target the DOM id of the target div to bind to\n * @param {object} options an object containing setup options for tableCloth\n */\nvar tableCloth = function(target,options) {\n  // keep track of tableCloth's container\n  this.$el = document.getElementById(target);\n\n  // attach the options to the constructed object\n  this.options = options;\n\n  // configure base options\n  this.options = coreOptions.configure(this.options);\n\n  // attach a top level canvas element to serve as the tableCloth viewport\n  coreViewport.attach(this);\n\n  // attach a cell manager\n  this.cellManager = new coreCellManager.basicCellManager(this);\n\n  // attach a cell factory method\n  this.cellFactory = {};\n  this.cellFactory.basicCell = coreCell.basicCell;\n\n}\n\n/**\n * animates the tableCloth instance to the diesired height\n * @param {float} height   the height in pixels to animate to\n * @param {float} duration the duration of the animation in milliseconds\n */\ntableCloth.prototype.animateToHeight = function(height,duration) {\n  coreViewport.animateToHeight(this, height, duration);\n}\n\n// if a window object is present, attach tableCloth to it\nif (window) {\n  window.tableCloth = tableCloth\n}\n\n},{\"./core/cell\":4,\"./core/cellManager\":7,\"./core/options\":8,\"./core/viewport\":12}],2:[function(require,module,exports){\n\n// easing functions from \"Tween.js\"\n\nexports.linear = function(n){\n  return n;\n};\n\nexports.inQuad = function(n){\n  return n * n;\n};\n\nexports.outQuad = function(n){\n  return n * (2 - n);\n};\n\nexports.inOutQuad = function(n){\n  n *= 2;\n  if (n < 1) return 0.5 * n * n;\n  return - 0.5 * (--n * (n - 2) - 1);\n};\n\nexports.inCube = function(n){\n  return n * n * n;\n};\n\nexports.outCube = function(n){\n  return --n * n * n + 1;\n};\n\nexports.inOutCube = function(n){\n  n *= 2;\n  if (n < 1) return 0.5 * n * n * n;\n  return 0.5 * ((n -= 2 ) * n * n + 2);\n};\n\nexports.inQuart = function(n){\n  return n * n * n * n;\n};\n\nexports.outQuart = function(n){\n  return 1 - (--n * n * n * n);\n};\n\nexports.inOutQuart = function(n){\n  n *= 2;\n  if (n < 1) return 0.5 * n * n * n * n;\n  return -0.5 * ((n -= 2) * n * n * n - 2);\n};\n\nexports.inQuint = function(n){\n  return n * n * n * n * n;\n}\n\nexports.outQuint = function(n){\n  return --n * n * n * n * n + 1;\n}\n\nexports.inOutQuint = function(n){\n  n *= 2;\n  if (n < 1) return 0.5 * n * n * n * n * n;\n  return 0.5 * ((n -= 2) * n * n * n * n + 2);\n};\n\nexports.inSine = function(n){\n  return 1 - Math.cos(n * Math.PI / 2 );\n};\n\nexports.outSine = function(n){\n  return Math.sin(n * Math.PI / 2);\n};\n\nexports.inOutSine = function(n){\n  return .5 * (1 - Math.cos(Math.PI * n));\n};\n\nexports.inExpo = function(n){\n  return 0 == n ? 0 : Math.pow(1024, n - 1);\n};\n\nexports.outExpo = function(n){\n  return 1 == n ? n : 1 - Math.pow(2, -10 * n);\n};\n\nexports.inOutExpo = function(n){\n  if (0 == n) return 0;\n  if (1 == n) return 1;\n  if ((n *= 2) < 1) return .5 * Math.pow(1024, n - 1);\n  return .5 * (-Math.pow(2, -10 * (n - 1)) + 2);\n};\n\nexports.inCirc = function(n){\n  return 1 - Math.sqrt(1 - n * n);\n};\n\nexports.outCirc = function(n){\n  return Math.sqrt(1 - (--n * n));\n};\n\nexports.inOutCirc = function(n){\n  n *= 2\n  if (n < 1) return -0.5 * (Math.sqrt(1 - n * n) - 1);\n  return 0.5 * (Math.sqrt(1 - (n -= 2) * n) + 1);\n};\n\nexports.inBack = function(n){\n  var s = 1.70158;\n  return n * n * (( s + 1 ) * n - s);\n};\n\nexports.outBack = function(n){\n  var s = 1.70158;\n  return --n * n * ((s + 1) * n + s) + 1;\n};\n\nexports.inOutBack = function(n){\n  var s = 1.70158 * 1.525;\n  if ( ( n *= 2 ) < 1 ) return 0.5 * ( n * n * ( ( s + 1 ) * n - s ) );\n  return 0.5 * ( ( n -= 2 ) * n * ( ( s + 1 ) * n + s ) + 2 );\n};\n\nexports.inBounce = function(n){\n  return 1 - exports.outBounce(1 - n);\n};\n\nexports.outBounce = function(n){\n  if ( n < ( 1 / 2.75 ) ) {\n    return 7.5625 * n * n;\n  } else if ( n < ( 2 / 2.75 ) ) {\n    return 7.5625 * ( n -= ( 1.5 / 2.75 ) ) * n + 0.75;\n  } else if ( n < ( 2.5 / 2.75 ) ) {\n    return 7.5625 * ( n -= ( 2.25 / 2.75 ) ) * n + 0.9375;\n  } else {\n    return 7.5625 * ( n -= ( 2.625 / 2.75 ) ) * n + 0.984375;\n  }\n};\n\nexports.inOutBounce = function(n){\n  if (n < .5) return exports.inBounce(n * 2) * .5;\n  return exports.outBounce(n * 2 - 1) * .5 + .5;\n};\n\n// aliases\n\nexports['in-quad'] = exports.inQuad;\nexports['out-quad'] = exports.outQuad;\nexports['in-out-quad'] = exports.inOutQuad;\nexports['in-cube'] = exports.inCube;\nexports['out-cube'] = exports.outCube;\nexports['in-out-cube'] = exports.inOutCube;\nexports['in-quart'] = exports.inQuart;\nexports['out-quart'] = exports.outQuart;\nexports['in-out-quart'] = exports.inOutQuart;\nexports['in-quint'] = exports.inQuint;\nexports['out-quint'] = exports.outQuint;\nexports['in-out-quint'] = exports.inOutQuint;\nexports['in-sine'] = exports.inSine;\nexports['out-sine'] = exports.outSine;\nexports['in-out-sine'] = exports.inOutSine;\nexports['in-expo'] = exports.inExpo;\nexports['out-expo'] = exports.outExpo;\nexports['in-out-expo'] = exports.inOutExpo;\nexports['in-circ'] = exports.inCirc;\nexports['out-circ'] = exports.outCirc;\nexports['in-out-circ'] = exports.inOutCirc;\nexports['in-back'] = exports.inBack;\nexports['out-back'] = exports.outBack;\nexports['in-out-back'] = exports.inOutBack;\nexports['in-bounce'] = exports.inBounce;\nexports['out-bounce'] = exports.outBounce;\nexports['in-out-bounce'] = exports.inOutBounce;\n\n},{}],3:[function(require,module,exports){\n/***************************************************************************\n * Basic cell definition. This class should serve as the base of all other *\n * cells                                                                   *\n ***************************************************************************/\nvar cellOptions = require('./options');\nvar util = require('../util');\n\nvar basicCell = function(options) {\n  // attach the options to the constructed object\n  this.options = options;\n\n  // configure base options\n  this.options = cellOptions.configure(this.options);\n\n}\n\nbasicCell.prototype.render = function(tableCloth) {\n  var height = this.options.height;\n  var width = this.options.width;\n  var pixelRatio = util.getPixelRatio();\n\n  tableCloth.viewport.can.width = width;\n  tableCloth.viewport.can.height = height;\n  tableCloth.viewport.can.style.width = width + 'px';\n  tableCloth.viewport.can.style.height = height + 'px';\n\n  tableCloth.viewport.ctx.beginPath();\n  tableCloth.viewport.ctx.rect(this.options.x, this.options.y, width * pixelRatio, height * pixelRatio);\n  tableCloth.viewport.ctx.fillStyle = tableCloth.options.bgColor;\n  tableCloth.viewport.ctx.fill();\n\n  tableCloth.viewport.ctx.scale(1 / pixelRatio, 1 / pixelRatio);\n\n  return tableCloth\n}\n\nmodule.exports = basicCell;\n\n},{\"../util\":11,\"./options\":5}],4:[function(require,module,exports){\nvar basicCell = require('./basicCell');\n\nmodule.exports = {\n  basicCell: basicCell\n}\n\n},{\"./basicCell\":3}],5:[function(require,module,exports){\n/****************************************\n * cell option processing utilities   *\n **************************************/\n\nfunction configure(options) {\n  options = (options === undefined) ? {} : options;\n  options.height = (options.height === undefined) ? 25 : options.height;\n  options.width = (options.width === undefined) ? 500 : options.width;\n  options.bgColor = (options.bgColor === undefined) ? '#EEEEEE' : options.bgColor;\n  options.x = (options.x === undefined) ? 0 : options.x;\n  options.y = (options.y === undefined) ? 0 : options.y;\n\n  return options;\n}\n\nmodule.exports = {\n  configure: configure\n}\n\n},{}],6:[function(require,module,exports){\n/********************************************************************\n * Minimal cell manager implementation. All logic related to moving *\n * cells around should go here                                      *\n ********************************************************************/\n var util = require('../util');\n var ease = require('ease-component');\n\n/**\n * creates a new basicCellManager\n */\nvar basicCellManager = function(tableCloth) {\n  this.tableCloth = tableCloth;\n  this.cells = [];\n  this.cellsHeight = 0;\n  this.scrollPosition = 0;\n}\n\n/**\n * add cell to the cell manager instance\n * @param {tableCloth cell} cell the cell to add\n */\nbasicCellManager.prototype.addCell = function(cell) {\n\n  cell.options.y = this.cellsHeight;\n  this.cells.push(cell);\n  this.cellsHeight += cell.options.height;\n  this.renderCells();\n\n  return this\n}\n\n/**\n * render all cells at the current scroll position\n */\nbasicCellManager.prototype.renderCells = function() {\n  this.renderCellsAtPosition(this.scrollPosition,0);\n}\n\n/**\n * renders the view of the cells at the given x and y position\n * @param {float} x the x position to be used\n * @param {float} y the y position to be used\n * @return {basicCellManager}\n */\nbasicCellManager.prototype.renderCellsAtPosition = function(x,y) {\n  var ctx = this.tableCloth.viewport.ctx;\n  var self = this;\n  var viewportHeight = this.tableCloth.options.height;\n  var viewportWidth = this.tableCloth.options.width;\n  var pixelRatio = util.getPixelRatio();\n\n  this.tableCloth.viewport.can.width = viewportWidth;\n  this.tableCloth.viewport.can.height = viewportHeight;\n  this.tableCloth.viewport.can.style.width = viewportWidth + 'px';\n  this.tableCloth.viewport.can.style.height = viewportHeight + 'px';\n\n  // render cells\n  this.cells.forEach(function (cell) {\n\n    // only render the cell if it is in the viewport\n    if (cell.options.y + cell.options.height > self.scrollPosition\n      && cell.options.y < self.scrollPosition + self.tableCloth.options.height) {\n        self.tableCloth.viewport.ctx.beginPath();\n        self.tableCloth.viewport.ctx.rect(cell.options.x, cell.options.y - self.scrollPosition,\n                                      cell.options.width * pixelRatio,\n                                      cell.options.height * pixelRatio);\n        self.tableCloth.viewport.ctx.fillStyle = cell.options.bgColor;\n        self.tableCloth.viewport.ctx.fill();\n    }\n  });\n\n  this.tableCloth.viewport.ctx.scale(1 / pixelRatio, 1 / pixelRatio);\n\n  return this;\n}\n\n\nbasicCellManager.prototype.scrollToPosition = function(y, duration, easeName) {\n  var self = this;\n  var start = new Date().getTime();\n  var startingPosition = this.scrollPosition;\n  var delta = y - startingPosition;\n  var easing = (easeName === undefined) ? ease.inOutExpo : ease[easeName];\n\n  var timer = 0;\n  var int = setInterval(function() {\n\n    var now = new Date().getTime();\n    var timeDiff =  now - start;\n    var proportion = timeDiff / duration;\n    self.scrollPosition = startingPosition + easing(proportion) * delta;\n\n    window.requestAnimationFrame(function() {\n      self.renderCells();\n    });\n\n    if (timeDiff >= duration) {\n      clearInterval(int);\n    }\n\n  },1);\n}\n\nmodule.exports = basicCellManager;\n\n},{\"../util\":11,\"ease-component\":2}],7:[function(require,module,exports){\nvar basicCellManager = require('./basicCellManager');\n\nmodule.exports = {\n  basicCellManager: basicCellManager\n}\n\n},{\"./basicCellManager\":6}],8:[function(require,module,exports){\n/*******************************\n * option processing utilities *\n *******************************/\n\nfunction configure(options) {\n  options = (options === undefined) ? {} : options;\n  options.height = (options.height === undefined) ? 500 : options.height;\n  options.width = (options.width === undefined) ? 500 : options.width;\n  options.bgColor = (options.bgColor === undefined) ? '#EEEEEE' : options.bgColor;\n\n  return options;\n}\n\nmodule.exports = {\n  configure: configure\n}\n\n},{}],9:[function(require,module,exports){\n'use strict'\nvar background = require('./render/background');\n\nmodule.exports = {\n  background: background.main\n}\n\n},{\"./render/background\":10}],10:[function(require,module,exports){\n'use strict'\n/*******************************\n * Background render utilities *\n *******************************/\nvar util = require('../util');\n\n/**\n * renders the background of a tableCloth instance\n * @param  {tableCloth} tableCloth the tableCloth instance to be rendered\n * @return {tableCloth}            the tableCloth instance\n */\nfunction main(tableCloth) {\n  var height = tableCloth.options.height;\n  var width = tableCloth.options.width;\n  var pixelRatio = util.getPixelRatio();\n\n  tableCloth.viewport.can.width = width;\n  tableCloth.viewport.can.height = height;\n  tableCloth.viewport.can.style.width = width + 'px';\n  tableCloth.viewport.can.style.height = height + 'px';\n\n  tableCloth.viewport.ctx.beginPath();\n  tableCloth.viewport.ctx.rect(0, 0, width * pixelRatio, height * pixelRatio);\n  tableCloth.viewport.ctx.fillStyle = tableCloth.options.bgColor;\n  tableCloth.viewport.ctx.fill();\n\n  tableCloth.viewport.ctx.scale(1 / pixelRatio, 1 / pixelRatio);\n\n  return tableCloth\n}\n\nmodule.exports = {\n  main: main\n}\n\n},{\"../util\":11}],11:[function(require,module,exports){\n/**\n * grab the current browser's pixel ratio\n * http://www.html5rocks.com/en/tutorials/canvas/hidpi/\n */\nfunction getPixelRatio() {\n    var ctx = document.createElement(\"canvas\").getContext(\"2d\"),\n        dpr = window.devicePixelRatio || 1,\n        bsr = ctx.webkitBackingStorePixelRatio ||\n              ctx.mozBackingStorePixelRatio ||\n              ctx.msBackingStorePixelRatio ||\n              ctx.oBackingStorePixelRatio ||\n              ctx.backingStorePixelRatio || 1;\n\n    return dpr / bsr;\n}\n\nmodule.exports = {\n  getPixelRatio: getPixelRatio\n}\n\n},{}],12:[function(require,module,exports){\n'use strict';\n/**********************\n * Viewport functions *\n **********************/\n var util = require('./util');\n var render = require('./render');\n var ease = require('ease-component');\n\n/**\n * attach a canvas element to the dom to serve as the top level tableCloth\n * viewport\n * @param  {TableCloth} tableCloth A tableCloth instance to attach\n * @return {tableCloth}            the attached tableCloth instance\n */\nfunction attach(tableCloth) {\n  // get the pixelRatio\n  var pixelRatio = util.getPixelRatio();\n\n  // generate a timestamped id for the tableCloth instance\n  tableCloth.id = new Date().getTime();\n\n  // build the viewport object and add it to the tableCloth instance\n  tableCloth.viewport = {};\n  tableCloth.viewport.can = document.createElement('canvas');\n  tableCloth.viewport.can.id = tableCloth.id + 'viewport';\n  tableCloth.viewport.can.setAttribute('data-height', tableCloth.options.height);\n  tableCloth.viewport.can.classList.add('tableCloth');\n\n  // attach the canvas\n  tableCloth.$el.appendChild(tableCloth.viewport.can);\n\n  // add the 2d context to the viewport\n  tableCloth.viewport.can.$el = document.getElementById(tableCloth.viewport.can.id);\n  tableCloth.viewport.ctx = tableCloth.viewport.can.$el.getContext('2d');\n\n\n\n\n  // render the background\n  render.background(tableCloth);\n\n\n  // return the tableCloth instance\n  return tableCloth;\n}\n\nfunction animateToHeight(tableCloth, height, duration, easeName) {\n  var start = new Date().getTime();\n  var startingHeight = tableCloth.options.height;\n  var delta = height - tableCloth.viewport.can.height;\n  var easing = (easeName === undefined) ? ease.inOutExpo : ease[easeName];\n\n  var timer = 0;\n  var int = setInterval(function() {\n\n    var now = new Date().getTime();\n    var timeDiff =  now - start;\n    var proportion = timeDiff / duration;\n    tableCloth.options.height = startingHeight + easing(proportion) * delta;\n\n    window.requestAnimationFrame(function() {\n      render.background(tableCloth);\n      tableCloth.cellManager.renderCells();\n    });\n\n    if (timeDiff >= duration) {\n      clearInterval(int);\n    }\n\n  },1);\n}\n\nmodule.exports = {\n  attach: attach,\n  animateToHeight: animateToHeight\n}\n\n},{\"./render\":9,\"./util\":11,\"ease-component\":2}]},{},[1]);\n"],"file":"bundle.js","sourceRoot":"/source/"}